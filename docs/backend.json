{
  "entities": {
    "UserProfile": {
      "title": "User Profile",
      "description": "Stores user profile information, mirroring the user_profile SQL table.",
      "type": "object",
      "properties": {
        "id": { "type": "string", "description": "User's unique ID, matches Firebase Auth UID." },
        "nombre": { "type": "string" },
        "email": { "type": "string", "format": "email" },
        "telefono": { "type": "string" },
        "rol": { "type": "string", "enum": ["admin", "coordinador", "usuario"] },
        "avatar_url": { "type": "string", "format": "uri" },
        "is_active": { "type": "boolean", "default": true },
        "last_login": { "type": "string", "format": "date-time" },
        "created_at": { "type": "string", "format": "date-time" },
        "updated_at": { "type": "string", "format": "date-time" }
      },
      "required": ["id", "nombre", "email", "rol", "is_active"]
    },
    "Seguro": {
      "title": "Seguro",
      "description": "Represents an insurance policy, based on the 'seguro' SQL table.",
      "type": "object",
      "properties": {
        "id": { "type": "string" },
        "nombre": { "type": "string" },
        "contacto": { "type": "string" },
        "moneda": { "type": "string" },
        "rif": { "type": "string" },
        "cobertura": { "type": "string" },
        "plazo_pago": { "type": "string" },
        "direccion": { "type": "string" },
        "forma_pago": { "type": "string" },
        "tipo_precio": { "type": "string" },
        "estatus": { "type": "string", "enum": ["Activo", "Suspendido"] },
        "baremo": { "type": "string" },
        "portal_web": { "type": "string", "format": "uri" },
        "fact_a_nombre": { "type": "string" },
        "fact_formato": { "type": "string" },
        "fact_comentario": { "type": "string" },
        "cons_protocolo": { "type": "string" },
        "cons_modalidad": { "type": "string" },
        "cons_copiar_a": { "type": "string" },
        "cons_horario": { "type": "string" },
        "cons_documentos": { "type": "string" },
        "cons_comentario": { "type": "string" },
        "created_at": { "type": "string", "format": "date-time" },
        "updated_at": { "type": "string", "format": "date-time" }
      },
      "required": ["id", "nombre", "estatus"]
    },
    "Colectivo": {
      "title": "Colectivo",
      "type": "object",
      "properties": {
        "id": { "type": "string" },
        "seguro_id": { "type": "string" },
        "nombre": { "type": "string" },
        "descripcion": { "type": "string" },
        "created_at": { "type": "string", "format": "date-time" },
        "updated_at": { "type": "string", "format": "date-time" }
      },
      "required": ["id", "seguro_id", "nombre"]
    },
    "Contacto": {
      "title": "Contacto",
      "type": "object",
      "properties": {
        "id": { "type": "string" },
        "seguro_id": { "type": "string" },
        "nombre": { "type": "string" },
        "telefono": { "type": "string" },
        "comentario": { "type": "string" },
        "created_at": { "type": "string", "format": "date-time" },
        "updated_at": { "type": "string", "format": "date-time" }
      },
      "required": ["id", "seguro_id", "nombre"]
    },
    "Correo": {
      "title": "Correo",
      "type": "object",
      "properties": {
        "id": { "type": "string" },
        "seguro_id": { "type": "string" },
        "nombre": { "type": "string" },
        "correo": { "type": "string", "format": "email" },
        "comentario": { "type": "string" },
        "created_at": { "type": "string", "format": "date-time" },
        "updated_at": { "type": "string", "format": "date-time" }
      },
      "required": ["id", "seguro_id", "nombre", "correo"]
    },
    "UsuarioPortal": {
      "title": "Usuario de Portal",
      "type": "object",
      "properties": {
        "id": { "type": "string" },
        "seguro_id": { "type": "string" },
        "usuario": { "type": "string" },
        "password": { "type": "string" },
        "comentario": { "type": "string" },
        "created_at": { "type": "string", "format": "date-time" },
        "updated_at": { "type": "string", "format": "date-time" }
      },
      "required": ["id", "seguro_id", "usuario", "password"]
    },
    "Popup": {
      "title": "Popup",
      "type": "object",
      "properties": {
        "id": { "type": "string" },
        "seguro_id": { "type": "string" },
        "titulo": { "type": "string" },
        "cuerpo": { "type": "string" },
        "url": { "type": "string", "format": "uri" },
        "activo": { "type": "boolean" },
        "created_at": { "type": "string", "format": "date-time" },
        "updated_at": { "type": "string", "format": "date-time" }
      },
      "required": ["id", "seguro_id", "titulo", "activo"]
    },
    "Archivo": {
      "title": "Archivo",
      "type": "object",
      "properties": {
        "id": { "type": "string" },
        "seguro_id": { "type": "string" },
        "nombre": { "type": "string" },
        "url_storage": { "type": "string", "format": "uri" },
        "tipo_mime": { "type": "string" },
        "tamano_kb": { "type": "integer" },
        "comentario": { "type": "string" },
        "created_at": { "type": "string", "format": "date-time" },
        "updated_at": { "type": "string", "format": "date-time" }
      },
      "required": ["id", "seguro_id", "nombre", "url_storage"]
    }
  },
  "auth": { "providers": ["password", "anonymous"] },
  "firestore": {
     "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "UserProfile",
          "schema": { "$ref": "#/backend/entities/UserProfile" },
          "description": "Collection for storing user-specific data. This allows path-based ownership for access control.",
          "params": [{"name": "userId", "description": "The unique identifier for the user."}]
        }
      },
      {
        "path": "/users/{userId}/seguros/{seguroId}",
        "definition": {
          "entityName": "Seguro",
          "schema": { "$ref": "#/backend/entities/Seguro" },
          "description": "Collection for storing insurance policies owned by a specific user.",
          "params": [
            {"name": "userId", "description": "The user ID."},
            {"name": "seguroId", "description": "The insurance policy ID."}
          ]
        }
      },
      {
        "path": "/seguros/{seguroId}/colectivos/{colectivoId}",
        "definition": {
          "entityName": "Colectivo",
          "schema": { "$ref": "#/backend/entities/Colectivo" },
          "description": "Subcollection for groups in an insurance policy.",
          "params": [{"name": "seguroId"}, {"name": "colectivoId"}]
        }
      },
      {
        "path": "/seguros/{seguroId}/contactos/{contactoId}",
        "definition": {
          "entityName": "Contacto",
          "schema": { "$ref": "#/backend/entities/Contacto" },
          "description": "Subcollection for contacts in an insurance policy.",
          "params": [{"name": "seguroId"}, {"name": "contactoId"}]
        }
      },
      {
        "path": "/seguros/{seguroId}/correos/{correoId}",
        "definition": {
          "entityName": "Correo",
          "schema": { "$ref": "#/backend/entities/Correo" },
          "description": "Subcollection for emails in an insurance policy.",
          "params": [{"name": "seguroId"}, {"name": "correoId"}]
        }
      },
      {
        "path": "/seguros/{seguroId}/usuarios_portal/{usuarioPortalId}",
        "definition": {
          "entityName": "UsuarioPortal",
          "schema": { "$ref": "#/backend/entities/UsuarioPortal" },
          "description": "Subcollection for portal users of an insurance policy.",
          "params": [{"name": "seguroId"}, {"name": "usuarioPortalId"}]
        }
      },
      {
        "path": "/seguros/{seguroId}/popups/{popupId}",
        "definition": {
          "entityName": "Popup",
          "schema": { "$ref": "#/backend/entities/Popup" },
          "description": "Subcollection for popups in an insurance policy.",
          "params": [{"name": "seguroId"}, {"name": "popupId"}]
        }
      },
      {
        "path": "/seguros/{seguroId}/archivos/{archivoId}",
        "definition": {
          "entityName": "Archivo",
          "schema": { "$ref": "#/backend/entities/Archivo" },
          "description": "Subcollection for files in an insurance policy.",
          "params": [{"name": "seguroId"}, {"name": "archivoId"}]
        }
      }
    ]
  }
}
